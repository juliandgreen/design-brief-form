{\rtf1\ansi\ansicpg1252\cocoartf2706
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 <!DOCTYPE html>\
<html lang="en">\
<head>\
    <meta charset="UTF-8">\
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\
    <title>Design Brief</title>\
    <!-- Google Fonts - Roboto -->\
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">\
    <!-- Tailwind CSS CDN -->\
    <script src="https://cdn.tailwindcss.com"></script>\
    <style>\
        /* Custom styles for Inter font and general body styling */\
        body \{\
            font-family: 'Inter', sans-serif;\
            background-color: #f3f4f6; /* Light gray background */\
        \}\
        /* Style for mandatory fields */\
        .mandatory-label::after \{\
            content: '*';\
            color: #ef4444; /* Red asterisk */\
            margin-left: 0.25rem;\
        \}\
        /* Custom styling for the signoff table */\
        .signoff-table th, .signoff-table td \{\
            padding: 0.75rem;\
            border: 1px solid #e5e7eb; /* Light gray border */\
            text-align: left;\
        \}\
        .signoff-table th \{\
            background-color: #f9fafb; /* Slightly darker background for headers */\
            font-weight: 600;\
        \}\
        /* Hidden by default for dynamic content */\
        .brief-type-section \{\
            display: none;\
        \}\
        /* Glyph's response font */\
        #ai-response-display \{\
            font-family: 'Roboto', sans-serif;\
        \}\
        /* Styles for inline suggestions */\
        .inline-suggestion-box \{\
            background-color: #e0f2f7; /* Light blue background */\
            border: 1px solid #b2ebf2; /* Blue border */\
            border-radius: 0.5rem;\
            padding: 0.75rem;\
            margin-top: 0.5rem;\
            font-size: 0.875rem; /* text-sm */\
            color: #00796b; /* Dark cyan text */\
            display: flex;\
            justify-content: space-between;\
            align-items: center;\
            gap: 0.5rem;\
        \}\
        .inline-suggestion-text \{\
            flex-grow: 1;\
            white-space: pre-wrap; /* Preserve whitespace and wrap text */\
        \}\
        .inline-suggestion-button \{\
            background-color: #4caf50; /* Green */\
            color: white;\
            padding: 0.25rem 0.75rem;\
            border-radius: 0.375rem;\
            cursor: pointer;\
            font-weight: 500;\
            transition: background-color 0.2s;\
        \}\
        .inline-suggestion-button:hover \{\
            background-color: #388e3c; /* Darker green */\
        \}\
        .loading-spinner \{\
            border: 4px solid rgba(0, 0, 0, 0.1);\
            border-left-color: #3b82f6; /* Blue */\
            border-radius: 50%;\
            width: 1.5rem;\
            height: 1.5rem;\
            animation: spin 1s linear infinite;\
        \}\
        @keyframes spin \{\
            0% \{ transform: rotate(0deg); \}\
            100% \{ transform: rotate(360deg); \}\
        \}\
    </style>\
</head>\
<body class="p-4 sm:p-6 md:p-8 lg:p-10">\
    <div class="max-w-4xl mx-auto bg-white p-6 sm:p-8 md:p-10 rounded-lg shadow-lg">\
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-6 text-center">Design Brief</h1>\
\
        <!-- Introductory text based on brief type -->\
        <p id="intro-text-common" class="text-sm text-gray-600 mb-8 text-center brief-intro-text">\
            Please submit your briefs by linking them into this document. All briefs are reviewed Mondays at 2 PM.\
            Reach out to Ryan Dougherty if your brief needs to be reviewed more urgently. Thank you!\
        </p>\
        <p id="intro-text-digital-launch" class="text-sm text-gray-600 mb-8 text-center brief-intro-text" style="display: none;">\
            Please submit your briefs by linking them into this document. Projects can be voiced over in monthly meeting and formally kicked off via email. All briefs are reviewed Mondays at 2pm.\
        </p>\
\
        <form>\
            <!-- Brief Type Dropdown -->\
            <div class="mb-8 p-4 bg-gray-100 rounded-lg border border-gray-300">\
                <label for="brief-type" class="block text-lg font-semibold text-gray-800 mb-2 mandatory-label">Select Brief Type</label>\
                <select id="brief-type" name="brief-type" required\
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-base">\
                    <option value="npi" selected>Design Brief - NPI</option>\
                    <option value="npi-lite">Design Brief - NPI Lite</option>\
                    <option value="digital-launch">Design Brief - Digital Launch Project</option>\
                </select>\
            </div>\
\
            <!-- AI Assistant Section -->\
            <div class="mb-8 p-6 bg-indigo-50 rounded-lg border border-indigo-200">\
                <h2 class="text-2xl font-semibold text-indigo-700 mb-4">Glyph - AI Assistant</h2>\
                <div class="space-y-4">\
                    <div>\
                        <label for="ai-query" class="block text-sm font-medium text-gray-700">Ask the Glyph for help or suggestions:</label>\
                        <textarea id="ai-query" name="ai-query" rows="3"\
                                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"\
                                  placeholder="E.g., 'Suggest key insights for a new skincare product launch' or 'Elaborate on communication goals for a digital marketing brief.'"></textarea>\
                    </div>\
                    <div class="flex flex-wrap gap-2">\
                        <button type="button" id="ask-glyph-button"\
                                class="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-md shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">\
                            Ask Glyph\
                        </button>\
                    </div>\
                    <div id="ai-response-loading" class="hidden text-indigo-700 mt-2">\
                        <svg class="animate-spin h-5 w-5 mr-3 inline-block" viewBox="0 0 24 24">\
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\
                        </svg>\
                        Generating...\
                    </div>\
                    <div id="ai-response-display" class="mt-4 p-4 bg-indigo-100 rounded-md border border-indigo-300 text-gray-800 hidden">\
                        <!-- AI response will be displayed here -->\
                    </div>\
                    <div id="ai-error-display" class="mt-4 p-4 bg-red-100 rounded-md border border-red-300 text-red-800 hidden">\
                        <!-- AI error messages will be displayed here -->\
                    </div>\
                </div>\
            </div>\
\
            <!-- Project Name Field (New) -->\
            <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                <label for="project-name" class="block text-lg font-semibold text-gray-800 mb-2 mandatory-label">Project Name</label>\
                <input type="text" id="project-name" name="project-name" required data-common-required="true"\
                       class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
            </div>\
\
            <!-- Common Sections for all Brief Types -->\
            <!-- Project RAPID Section -->\
            <div class="mb-8 p-6 bg-blue-50 rounded-lg border border-blue-200">\
                <h2 class="text-2xl font-semibold text-blue-700 mb-4">Project RAPID</h2>\
                <p class="text-sm text-gray-600 mb-4">(Owner: Brief Writer, pre-aligned with Product PM)</p>\
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">\
                    <div>\
                        <label for="rapid-r" class="block text-sm font-medium text-gray-700 mandatory-label">R</label>\
                        <input type="text" id="rapid-r" name="rapid-r" required data-common-required="true"\
                               title="Develops recommendation for a decision. Primary responsibility for making a proposal. Gather and assess the relevant facts. Obtain input from relevant parties. Drive robust analysis and conclusions. 80% of work happens here."\
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                        <div id="rapid-r-suggestion" class="inline-suggestion-box hidden"></div>\
                    </div>\
                    <div>\
                        <label for="rapid-a" class="block text-sm font-medium text-gray-700 mandatory-label">A</label>\
                        <input type="text" id="rapid-a" name="rapid-a" required data-common-required="true"\
                               title="Formal approval of a recommendation / decision. Think of this as a \'93veto\'94 \'96 like an Input \'93with teeth\'94 from a different subject matter expert. Often limited to legal, compliance, and budget / finance."\
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                        <div id="rapid-a-suggestion" class="inline-suggestion-box hidden"></div>\
                    </div>\
                    <div>\
                        <label for="rapid-p" class="block text-sm font-medium text-gray-700 mandatory-label">P</label>\
                        <input type="text" id="rapid-p" name="rapid-p" required data-common-required="true"\
                               title="Accountable for executing the decision, once it is made. Explicit Ps. Note: sometimes Ps have input, and sometimes they don\'92t."\
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                        <div id="rapid-p-suggestion" class="inline-suggestion-box hidden"></div>\
                    </div>\
                    <div>\
                        <label for="rapid-i" class="block text-sm font-medium text-gray-700 mandatory-label">I</label>\
                        <input type="text" id="rapid-i" name="rapid-i" required data-common-required="true"\
                               title="Consulted on the decision. Provide valuable expertise, experience, information. No obligation for decision maker to act on advice. Right number of Is (not too many, not too few). Input collected at the right time and in the right sequence."\
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                        <div id="rapid-i-suggestion" class="inline-suggestion-box hidden"></div>\
                    </div>\
                    <div>\
                        <label for="rapid-d" class="block text-sm font-medium text-gray-700 mandatory-label">D</label>\
                        <input type="text" id="rapid-d" name="rapid-d" required data-common-required="true"\
                               title="Make the final decision. \'93Commit the organization to action.\'94 Only one D. Only one!!! Assigned at the right level of the organization."\
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                        <div id="rapid-d-suggestion" class="inline-suggestion-box hidden"></div>\
                    </div>\
                </div>\
            </div>\
\
            <!-- Kickoff and Design Review Rounds -->\
            <div class="mb-8 grid grid-cols-1 sm:grid-cols-2 gap-6">\
                <div>\
                    <label class="block text-sm font-medium text-gray-700 mandatory-label mb-2">Kickoff via meeting or email?</label>\
                    <div class="mt-1 flex items-center space-x-4">\
                        <label class="inline-flex items-center">\
                            <input type="radio" name="kickoff-method" value="meeting" required data-common-required="true"\
                                   class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">\
                            <span class="ml-2 text-gray-700">Meeting</span>\
                        </label>\
                        <label class="inline-flex items-center">\
                            <input type="radio" name="kickoff-method" value="email" required data-common-required="true"\
                                   class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">\
                            <span class="ml-2 text-gray-700">Email</span>\
                        </label>\
                    </div>\
                    <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                </div>\
                <div>\
                    <label for="design-review-rounds" class="block text-sm font-medium text-gray-700 mandatory-label">How many Design Review Rounds are being requested?</label>\
                    <input type="number" id="design-review-rounds" name="design-review-rounds" min="1" required data-common-required="true"\
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                    <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                </div>\
            </div>\
\
            <!-- NPI Specific Sections -->\
            <div id="npi-brief-sections" class="brief-type-section">\
                <!-- Section 1: Project Overview (NPI) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 1: Project Overview (NPI)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="npi-brands" class="block text-sm font-medium text-gray-700 mandatory-label">Brand(s)</label>\
                            <input type="text" id="npi-brands" name="npi-brands" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-brand-quadrant" class="block text-sm font-medium text-gray-700 mandatory-label">Which quadrant does this fall under in the H&F Brand Architecture matrices? (i.e., Q1, Q2, Q3, etc.)</label>\
                            <input type="text" id="npi-brand-quadrant" name="npi-brand-quadrant" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-region" class="block text-sm font-medium text-gray-700 mandatory-label">Region</label>\
                            <input type="text" id="npi-region" name="npi-region" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-channel" class="block text-sm font-medium text-gray-700 mandatory-label">Channel</label>\
                            <input type="text" id="npi-channel" name="npi-channel" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-deliverable-description" class="block text-sm font-medium text-gray-700 mandatory-label">Deliverable Description (e.g., \'93Gen 3 Retail Packaging\'94)</label>\
                            <input type="text" id="npi-deliverable-description" name="npi-deliverable-description" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-project-goal" class="block text-sm font-medium text-gray-700 mandatory-label">Project Goal in One Line</label>\
                            <input type="text" id="npi-project-goal" name="npi-project-goal" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label class="block text-sm font-medium text-gray-700 mandatory-label">Key Milestones:</label>\
                            <p class="text-xs text-gray-500 mb-2">(Owner: Product PM)</p>\
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">\
                                <div>\
                                    <label for="npi-milestone-kickoff" class="block text-sm font-medium text-gray-700">Creative Brief Kickoff</label>\
                                    <input type="date" id="npi-milestone-kickoff" name="npi-milestone-kickoff" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-r1" class="block text-sm font-medium text-gray-700">R1</label>\
                                    <input type="date" id="npi-milestone-r1" name="npi-milestone-r1" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-r2" class="block text-sm font-medium text-gray-700">R2</label>\
                                    <input type="date" id="npi-milestone-r2" name="npi-milestone-r2" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-r3" class="block text-sm font-medium text-gray-700">R3</label>\
                                    <input type="date" id="npi-milestone-r3" name="npi-milestone-r3" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-artwork-lock" class="block text-sm font-medium text-gray-700">Artwork Lock</label>\
                                    <input type="date" id="npi-milestone-artwork-lock" name="npi-milestone-artwork-lock" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-graphics-handoff" class="block text-sm font-medium text-gray-700">Graphics Handoff to Production</label>\
                                    <input type="date" id="npi-milestone-graphics-handoff" name="npi-milestone-graphics-handoff" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-print-specs" class="block text-sm font-medium text-gray-700">Print Specs</label>\
                                    <input type="date" id="npi-milestone-print-specs" name="npi-milestone-print-specs" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-artwork-layout" class="block text-sm font-medium text-gray-700">Artwork Layout</label>\
                                    <input type="date" id="npi-milestone-artwork-layout" name="npi-milestone-artwork-layout" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-zookeeper-routing" class="block text-sm font-medium text-gray-700">Zookeeper Routing</label>\
                                    <input type="date" id="npi-milestone-zookeeper-routing" name="npi-milestone-zookeeper-routing" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-artwork-qc" class="block text-sm font-medium text-gray-700">Artwork QC</label>\
                                    <input type="date" id="npi-milestone-artwork-qc" name="npi-milestone-artwork-qc" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-artwork-release" class="block text-sm font-medium text-gray-700">Artwork Release</label>\
                                    <input type="date" id="npi-milestone-artwork-release" name="npi-milestone-artwork-release" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-packaging-production-start" class="block text-sm font-medium text-gray-700">Packaging Production start date</label>\
                                    <input type="date" id="npi-milestone-packaging-production-start" name="npi-milestone-packaging-production-start" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-milestone-launch-date" class="block text-sm font-medium text-gray-700">Launch Date</label>\
                                    <input type="date" id="npi-milestone-launch-date" name="npi-milestone-launch-date" required data-npi-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                            </div>\
                        </div>\
                    </div>\
                </div>\
\
                <!-- Section 2: Project Details (NPI) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 2: Project Details (NPI)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="npi-pitching-awarded" class="block text-sm font-medium text-gray-700 mandatory-label">Pitching or Awarded?</label>\
                            <input type="text" id="npi-pitching-awarded" name="npi-pitching-awarded" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-key-insights" class="block text-sm font-medium text-gray-700 mandatory-label">Key Insights</label>\
                            <textarea id="npi-key-insights" name="npi-key-insights" rows="3" required data-npi-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-consumer-behavior" class="block text-sm font-medium text-gray-700 mandatory-label">How do we want our consumer to think/feel/behave as a result of the work?</label>\
                            <textarea id="npi-consumer-behavior" name="npi-consumer-behavior" rows="3" required data-npi-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-reference-deliverables" class="block text-sm font-medium text-gray-700 mandatory-label">Reference Deliverables* (please add specific job #s)</label>\
                            <textarea id="npi-reference-deliverables" name="npi-reference-deliverables" rows="3" required data-npi-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">*What projects that we\'92ve already completed are relevant references? (Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-required-assortment" class="block text-sm font-medium text-gray-700 mandatory-label">Required Assortment</label>\
                            <input type="text" id="npi-required-assortment" name="npi-required-assortment" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-dimensions-constraints" class="block text-sm font-medium text-gray-700 mandatory-label">Dimensions or Size Constraints</label>\
                            <input type="text" id="npi-dimensions-constraints" name="npi-dimensions-constraints" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer with input from PKG and Retail)</p>\
                        </div>\
                        <div>\
                            <label for="npi-budget" class="block text-sm font-medium text-gray-700 mandatory-label">Budget</label>\
                            <input type="text" id="npi-budget" name="npi-budget" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer with input from Sourcing)</p>\
                        </div>\
                        <div>\
                            <label for="npi-other-considerations" class="block text-sm font-medium text-gray-700 mandatory-label">Other Business-critical Considerations</label>\
                            <textarea id="npi-other-considerations" name="npi-other-considerations" rows="3" required data-npi-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                    </div>\
                </div>\
\
                <!-- Section 3: Messaging (NPI) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 3: Messaging (NPI)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="npi-communication-goals" class="block text-sm font-medium text-gray-700 mandatory-label">Communication Goals</label>\
                            <textarea id="npi-communication-goals" name="npi-communication-goals" rows="3" required data-npi-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-messaging-hierarchy" class="block text-sm font-medium text-gray-700 mandatory-label">Messaging Hierarchy in priority order</label>\
                            <textarea id="npi-messaging-hierarchy" name="npi-messaging-hierarchy" rows="3" required data-npi-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-copy-doc-link" class="block text-sm font-medium text-gray-700 mandatory-label">Link to Copy Doc / Artwork Inputs</label>\
                            <input type="url" id="npi-copy-doc-link" name="npi-copy-doc-link" required data-npi-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="H\'92 template">\
                            <input type="url" id="npi-copy-doc-link-f" name="npi-copy-doc-link-f" required data-npi-required="true"\
                                   class="mt-2 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="F\'92 template">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Creative PM)</p>\
                        </div>\
                    </div>\
                </div>\
\
                <!-- Section 4: Appendix (NPI) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 4: Appendix <span class="text-base font-normal text-gray-600">(Optional context and links)</span></h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="npi-creative-inspiration" class="block text-sm font-medium text-gray-700">Creative Inspiration (please include links and add commentary to each link as to why they\'92re relevant)</label>\
                            <textarea id="npi-creative-inspiration" name="npi-creative-inspiration" rows="5"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:focus:ring-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-competitor-context" class="block text-sm font-medium text-gray-700">Competitor Context</label>\
                            <textarea id="npi-competitor-context" name="npi-competitor-context" rows="3"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                    </div>\
                </div>\
            </div> <!-- End npi-brief-sections -->\
\
            <!-- NPI Lite Specific Sections -->\
            <div id="npi-lite-brief-sections" class="brief-type-section">\
                <!-- Why Lite brief? -->\
                <div class="mb-8 p-6 bg-yellow-50 rounded-lg border border-yellow-200">\
                    <label for="npi-lite-why-brief" class="block text-lg font-semibold text-yellow-800 mb-2 mandatory-label">Why are you using the Lite brief? (i.e., artwork pickup, production-led, translations)</label>\
                    <input type="text" id="npi-lite-why-brief" name="npi-lite-why-brief" required data-npi-lite-required="true"\
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm">\
                </div>\
\
                <!-- Section 1: Project Overview (NPI Lite) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 1: Project Overview (NPI Lite)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="npi-lite-brands" class="block text-sm font-medium text-gray-700 mandatory-label">Brand(s)</label>\
                            <input type="text" id="npi-lite-brands" name="npi-lite-brands" required data-npi-lite-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-lite-brand-quadrant" class="block text-sm font-medium text-gray-700 mandatory-label">Which quadrant does this fall under in the H&F Brand Architecture matrices? (i.e., Q1, Q2, Q3, etc.)</label>\
                            <input type="text" id="npi-lite-brand-quadrant" name="npi-lite-brand-quadrant" required data-npi-lite-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-lite-region" class="block text-sm font-medium text-gray-700 mandatory-label">Region</label>\
                            <input type="text" id="npi-lite-region" name="npi-lite-region" value="US" required data-npi-lite-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-lite-channel" class="block text-sm font-medium text-gray-700 mandatory-label">Channel</label>\
                            <input type="text" id="npi-lite-channel" name="npi-lite-channel" value="Harry\'92s Brand" required data-npi-lite-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-lite-deliverable-description" class="block text-sm font-medium text-gray-700 mandatory-label">Deliverable Description (e.g., \'93Gen 3 Retail Packaging\'94)</label>\
                            <input type="text" id="npi-lite-deliverable-description" name="npi-lite-deliverable-description" required data-npi-lite-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-lite-project-goal" class="block text-sm font-medium text-gray-700 mandatory-label">Project Goal in One Line</label>\
                            <input type="text" id="npi-lite-project-goal" name="npi-lite-project-goal" required data-npi-lite-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label class="block text-sm font-medium text-gray-700 mandatory-label">Key Milestones:</label>\
                            <p class="text-xs text-gray-500 mb-2">(Owner: Product PM)</p>\
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">\
                                <div>\
                                    <label for="npi-lite-milestone-kickoff" class="block text-sm font-medium text-gray-700">Creative Brief Kickoff</label>\
                                    <input type="date" id="npi-lite-milestone-kickoff" name="npi-lite-milestone-kickoff" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-r1-2d" class="block text-sm font-medium text-gray-700">R1 2D (if required)</label>\
                                    <input type="date" id="npi-lite-milestone-r1-2d" name="npi-lite-milestone-r1-2d" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-artwork-lock" class="block text-sm font-medium text-gray-700">Artwork Lock</label>\
                                    <input type="date" id="npi-lite-milestone-artwork-lock" name="npi-lite-milestone-artwork-lock" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-graphics-handoff" class="block text-sm font-medium text-gray-700">Graphics Handoff to Production</label>\
                                    <input type="date" id="npi-lite-milestone-graphics-handoff" name="npi-lite-milestone-graphics-handoff" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-print-specs" class="block text-sm font-medium text-gray-700">Print Specs</label>\
                                    <input type="date" id="npi-lite-milestone-print-specs" name="npi-lite-milestone-print-specs" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-artwork-layout" class="block text-sm font-medium text-gray-700">Artwork Layout</label>\
                                    <input type="date" id="npi-lite-milestone-artwork-layout" name="npi-lite-milestone-artwork-layout" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-zookeeper-routing" class="block text-sm font-medium text-gray-700">Zookeeper Routing</label>\
                                    <input type="date" id="npi-lite-milestone-zookeeper-routing" name="npi-lite-milestone-zookeeper-routing" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-artwork-qc" class="block text-sm font-medium text-gray-700">Artwork QC</label>\
                                    <input type="date" id="npi-lite-milestone-artwork-qc" name="npi-lite-milestone-artwork-qc" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-artwork-release" class="block text-sm font-medium text-gray-700">Artwork Release</label>\
                                    <input type="date" id="npi-lite-milestone-artwork-release" name="npi-lite-milestone-artwork-release" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-packaging-production-start" class="block text-sm font-medium text-gray-700">Packaging Production start date</label>\
                                    <input type="date" id="npi-lite-milestone-packaging-production-start" name="npi-lite-packaging-production-start" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="npi-lite-milestone-launch-date" class="block text-sm font-medium text-gray-700">Launch Date</label>\
                                    <input type="date" id="npi-lite-milestone-launch-date" name="npi-lite-launch-date" required data-npi-lite-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                            </div>\
                        </div>\
                    </div>\
                </div>\
\
                <!-- Section 2: Project Details (NPI Lite) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 2: Project Details (NPI Lite)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="npi-lite-reference-deliverables" class="block text-sm font-medium text-gray-700 mandatory-label">Reference Deliverables* (please add specific job #s)</label>\
                            <textarea id="npi-lite-reference-deliverables" name="npi-lite-reference-deliverables" rows="3" required data-npi-lite-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">*What projects that we\'92ve already completed are relevant references? (Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="npi-lite-other-considerations" class="block text-sm font-medium text-gray-700 mandatory-label">Other Business-critical Considerations</label>\
                            <textarea id="npi-lite-other-considerations" name="npi-lite-other-considerations" rows="3" required data-npi-lite-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                    </div>\
                </div>\
\
                <!-- Section 3: Messaging (NPI Lite) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 3: Messaging (NPI Lite)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="npi-lite-copy-doc-link" class="block text-sm font-medium text-gray-700 mandatory-label">Link to Copy Doc / Artwork Inputs</label>\
                            <input type="url" id="npi-lite-copy-doc-link" name="npi-lite-copy-doc-link" required data-npi-lite-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="H\'92 template">\
                            <input type="url" id="npi-lite-copy-doc-link-f" name="npi-lite-copy-doc-link-f" required data-npi-lite-required="true"\
                                   class="mt-2 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="F\'92 template">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Creative PM)</p>\
                        </div>\
                    </div>\
                </div>\
            </div> <!-- End npi-lite-brief-sections -->\
\
            <!-- Digital Launch Project Specific Sections -->\
            <div id="digital-launch-brief-sections" class="brief-type-section">\
                <!-- DRI Brief Approval -->\
                <div class="mb-8 p-6 bg-purple-50 rounded-lg border border-purple-200">\
                    <label for="digital-launch-dri-approval" class="block text-lg font-semibold text-purple-800 mb-2 mandatory-label">DRI Brief Approval</label>\
                    <p class="text-sm text-gray-600 mb-2">(Ryan (Digital LTO, Partnerships, and GWP) / Laura (Digital Evergreen or New Category Incubation Pilot))</p>\
                    <input type="text" id="digital-launch-dri-approval" name="digital-launch-dri-approval" required data-digital-launch-required="true"\
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm">\
                    <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                </div>\
\
                <!-- If External, what will the partner approval process be? -->\
                <div class="mb-8 p-6 bg-purple-50 rounded-lg border border-purple-200">\
                    <label for="digital-launch-partner-approval" class="block text-lg font-semibold text-purple-800 mb-2 mandatory-label">If External, what will the partner approval process be?</label>\
                    <textarea id="digital-launch-partner-approval" name="digital-launch-partner-approval" rows="3" required data-digital-launch-required="true"\
                              class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"></textarea>\
                    <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                </div>\
\
                <!-- Section 1: Project Overview (Digital Launch) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 1: Project Overview (Digital Launch Project)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="digital-launch-brands" class="block text-sm font-medium text-gray-700 mandatory-label">Brand(s)</label>\
                            <input type="text" id="digital-launch-brands" name="digital-launch-brands" required data-digital-launch-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="digital-launch-regions" class="block text-sm font-medium text-gray-700 mandatory-label">Region(s)</label>\
                            <input type="text" id="digital-launch-regions" name="digital-launch-regions" required data-digital-launch-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="digital-launch-channel" class="block text-sm font-medium text-gray-700 mandatory-label">Channel</label>\
                            <input type="text" id="digital-launch-channel" name="digital-launch-channel" required data-digital-launch-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="digital-launch-deliverable-description" class="block text-sm font-medium text-gray-700 mandatory-label">Deliverable Description (ex. \'93Gen 3 Retail Packaging\'94)</label>\
                            <input type="text" id="digital-launch-deliverable-description" name="digital-launch-deliverable-description" required data-digital-launch-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="digital-launch-project-goal" class="block text-sm font-medium text-gray-700 mandatory-label">Project Goal in One Line</label>\
                            <input type="text" id="digital-launch-project-goal" name="digital-launch-project-goal" required data-digital-launch-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label class="block text-sm font-medium text-gray-700 mandatory-label">Key Milestones:</label>\
                            <p class="text-xs text-gray-500 mb-2">(Owner: Product PM)</p>\
                            <p class="text-xs text-gray-500 mb-2">Note: Smartsheet timeline (link per project here.) will be source of truth</p>\
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">\
                                <div>\
                                    <label for="digital-launch-milestone-brief-complete" class="block text-sm font-medium text-gray-700">Brief Complete</label>\
                                    <input type="date" id="digital-launch-milestone-brief-complete" name="digital-launch-milestone-brief-complete" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-design-review" class="block text-sm font-medium text-gray-700">Design Review</label>\
                                    <input type="date" id="digital-launch-milestone-design-review" name="digital-launch-milestone-design-review" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-product-lock" class="block text-sm font-medium text-gray-700">Product Lock</label>\
                                    <input type="date" id="digital-launch-milestone-product-lock" name="digital-launch-milestone-product-lock" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-artwork-lock" class="block text-sm font-medium text-gray-700">Artwork Lock</label>\
                                    <input type="date" id="digital-launch-milestone-artwork-lock" name="digital-launch-milestone-artwork-lock" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-graphics-handoff" class="block text-sm font-medium text-gray-700">Graphics Handoff to Production</label>\
                                    <input type="date" id="digital-launch-milestone-graphics-handoff" name="digital-launch-milestone-graphics-handoff" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-print-specs" class="block text-sm font-medium text-gray-700">Print Specs</label>\
                                    <input type="date" id="digital-launch-milestone-print-specs" name="digital-launch-milestone-print-specs" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-artwork-layout" class="block text-sm font-medium text-gray-700">Artwork Layout</label>\
                                    <input type="date" id="digital-launch-milestone-artwork-layout" name="digital-launch-milestone-artwork-layout" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-zookeeper-routing" class="block text-sm font-medium text-gray-700">Zookeeper Routing</label>\
                                    <input type="date" id="digital-launch-milestone-zookeeper-routing" name="digital-launch-milestone-zookeeper-routing" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-artwork-qc" class="block text-sm font-medium text-gray-700">Artwork QC</label>\
                                    <input type="date" id="digital-launch-milestone-artwork-qc" name="digital-launch-milestone-artwork-qc" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-artwork-release" class="block text-sm font-medium text-gray-700">Artwork Release</label>\
                                    <input type="date" id="digital-launch-milestone-artwork-release" name="digital-launch-milestone-artwork-release" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-mp-start" class="block text-sm font-medium text-gray-700">MP start</label>\
                                    <input type="date" id="digital-launch-milestone-mp-start" name="digital-launch-milestone-mp-start" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                                <div>\
                                    <label for="digital-launch-milestone-launch-date" class="block text-sm font-medium text-gray-700">Launch Date</label>\
                                    <input type="date" id="digital-launch-milestone-launch-date" name="digital-launch-milestone-launch-date" required data-digital-launch-required="true"\
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">\
                                </div>\
                            </div>\
                        </div>\
                    </div>\
                </div>\
\
                <!-- Section 2: Project Details (Digital Launch) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 2: Project Details (Digital Launch Project)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="digital-launch-reference-deliverables" class="block text-sm font-medium text-gray-700 mandatory-label">Reference Deliverables* (please add specific job #s)</label>\
                            <textarea id="digital-launch-reference-deliverables" name="digital-launch-reference-deliverables" rows="3" required data-digital-launch-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">*What projects that we\'92ve already completed are relevant references? (Owner: Brief Writer)</p>\
                        </div>\
                        <div>\
                            <label for="digital-launch-other-considerations" class="block text-sm font-medium text-gray-700 mandatory-label">Other Business-critical Considerations</label>\
                            <textarea id="digital-launch-other-considerations" name="digital-launch-other-considerations" rows="3" required data-digital-launch-required="true"\
                                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Brief Writer)</p>\
                        </div>\
                    </div>\
                </div>\
\
                <!-- Section 3: Messaging (Digital Launch) -->\
                <div class="mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200">\
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Section 3: Messaging (Digital Launch Project)</h2>\
                    <div class="space-y-4">\
                        <div>\
                            <label for="digital-launch-copy-doc-link" class="block text-sm font-medium text-gray-700 mandatory-label">Link to Copy Doc / Artwork Inputs</label>\
                            <input type="url" id="digital-launch-copy-doc-link" name="digital-launch-copy-doc-link" required data-digital-launch-required="true"\
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="H\'92 template">\
                            <input type="url" id="digital-launch-copy-doc-link-f" name="digital-launch-copy-doc-link-f" required data-digital-launch-required="true"\
                                   class="mt-2 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="F\'92 template">\
                            <p class="text-xs text-gray-500 mt-1">(Owner: Creative PM)</p>\
                        </div>\
                    </div>\
                </div>\
            </div> <!-- End digital-launch-brief-sections -->\
\
            <!-- Brief Signoff Section (Common) -->\
            <div id="brief-signoff-section" class="mb-8 p-6 bg-green-50 rounded-lg border border-green-200">\
                <h2 class="text-2xl font-semibold text-green-700 mb-4">Brief Signoff</h2>\
                <p class="text-sm text-gray-600 mb-4">This section to be signed off prior to the brief kickoff meeting or email. (Owner: Brief Writer)</p>\
\
                <div class="overflow-x-auto">\
                    <table class="min-w-full signoff-table rounded-lg overflow-hidden">\
                        <thead>\
                            <tr>\
                                <th class="w-1/4">Owner</th>\
                                <th class="w-1/4">Signoff (G / Y / R Key Below)</th>\
                                <th class="w-1/2">Commentary</th>\
                            </tr>\
                        </thead>\
                        <tbody>\
                            <tr>\
                                <td><label for="signoff-d" class="block text-sm font-medium text-gray-700 mandatory-label">Name of D</label></td>\
                                <td>\
                                    <input type="text" id="signoff-d" name="signoff-d" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                                <td>\
                                    <input type="text" id="commentary-d" name="commentary-d" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                            </tr>\
                            <tr>\
                                <td><label for="signoff-product-pm" class="block text-sm font-medium text-gray-700 mandatory-label">Product PM</label></td>\
                                <td>\
                                    <input type="text" id="signoff-product-pm" name="signoff-product-pm" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                                <td>\
                                    <input type="text" id="commentary-product-pm" name="commentary-product-pm" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                            </tr>\
                            <tr>\
                                <td><label for="signoff-design-pkg" class="block text-sm font-medium text-gray-700 mandatory-label">Design/PKG</label></td>\
                                <td>\
                                    <input type="text" id="signoff-design-pkg" name="signoff-design-pkg" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                                <td>\
                                    <input type="text" id="commentary-design-pkg" name="commentary-design-pkg" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                            </tr>\
                            <tr>\
                                <td><label for="signoff-brand-creative-pm" class="block text-sm font-medium text-gray-700 mandatory-label">Brand Creative PM</label></td>\
                                <td>\
                                    <input type="text" id="signoff-brand-creative-pm" name="signoff-brand-creative-pm" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                                <td>\
                                    <input type="text" id="commentary-brand-creative-pm" name="commentary-brand-creative-pm" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                            </tr>\
                            <tr>\
                                <td><label for="signoff-sourcing-lead" class="block text-sm font-medium text-gray-700 mandatory-label">Sourcing Lead</label></td>\
                                <td>\
                                    <input type="text" id="signoff-sourcing-lead" name="signoff-sourcing-lead" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                                <td>\
                                    <input type="text" id="commentary-sourcing-lead" name="commentary-sourcing-lead" required data-signoff-required="true"\
                                           class="mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">\
                                </td>\
                            </tr>\
                        </tbody>\
                    </table>\
                </div>\
\
                <div class="mt-6 text-sm text-gray-700 space-y-2">\
                    <p><span class="font-bold text-green-600">G (Good to Go):</span> Fully aligned. No call-outs for cross-functional teams.</p>\
                    <p><span class="font-bold text-yellow-600">Y (Minor Risks Identified):</span> Team is actively mitigating against risks. Aligned to move forward contingent on resolutions.</p>\
                    <p><span class="font-bold text-red-600">R (Not Approved):</span> Not aligned to move forward. Major risks exist and need to be discussed cross-functionally.</p>\
                </div>\
            </div>\
\
            <div class="text-center">\
                <button type="submit" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">\
                    Submit Brief\
                </button>\
            </div>\
        </form>\
    </div>\
\
    <script>\
        // Get references to the dropdown and the brief sections\
        const briefTypeDropdown = document.getElementById('brief-type');\
        const npiBriefSections = document.getElementById('npi-brief-sections');\
        const npiLiteBriefSections = document.getElementById('npi-lite-brief-sections');\
        const digitalLaunchBriefSections = document.getElementById('digital-launch-brief-sections');\
        const briefSignoffSection = document.getElementById('brief-signoff-section');\
\
        const introTextCommon = document.getElementById('intro-text-common');\
        const introTextDigitalLaunch = document.getElementById('intro-text-digital-launch');\
\
        // AI Assistant elements\
        const aiQueryInput = document.getElementById('ai-query');\
        const askGlyphButton = document.getElementById('ask-glyph-button');\
        const aiResponseLoading = document.getElementById('ai-response-loading');\
        const aiResponseDisplay = document.getElementById('ai-response-display');\
        const aiErrorDisplay = document.getElementById('ai-error-display');\
\
        // Define Glyph's personality\
        const glyphPersonality = "You are a helpful and encouraging assistant, focused on providing clear and actionable advice for design brief writing. Your responses should be concise and to the point. When referring to section names or key terms, please use <strong>HTML bold tags</strong> instead of Markdown asterisks.";\
\
        // Define section definitions for AI context\
        const sectionDefinitions = \{\
            "Project RAPID": `This section outlines roles and responsibilities using the RAPID framework:\
                R (Recommend):\
                    - Description of role: Develops recommendation for a decision. Primary responsibility for making a proposal. Gather and and assess the relevant facts. Obtain input from relevant parties. Drive robust analysis and conclusions. 80% of work happens here.\
                    - Checklist for a good R: One clear R \'96 the R can get input from others, but there\'92s one recommender. The R is a capable project manager.\
                A (Agree):\
                    - Description of role: Formal approval of a recommendation / decision. Think of this as a \'93veto\'94 \'96 like an Input \'93with teeth\'94 from a different subject matter expert.\
                    - Checklist for a good A: Often limited to legal, compliance, and budget / finance.\
                P (Perform):\
                    - Description of role: Accountable for executing the decision, once it is made.\
                    - Checklist for a good P: Explicit Ps. Note: sometimes Ps have input, and sometimes they don\'92t.\
                I (Input):\
                    - Description of role: Consulted on the decision. Provide valuable expertise, experience, information. No obligation for decision maker to act on advice.\
                    - Checklist for a good I: Right number of Is (not too many, not too few). Input collected at the right time and in the right sequence.\
                D (Decide):\
                    - Description of role: Make the final decision. \'93Commit the organization to action.\'94 Only one D.\
                    - Checklist for a good D: Only one!!! Assigned at the right level of the organization.`,\
            "Kickoff via meeting or email?": "Specifies how the project's initial kickoff will be conducted.",\
            "How many Design Review Rounds are being requested?": "Indicates the number of design review iterations planned for the project.",\
            "Section 1: Project Overview": "Provides high-level details about the project, including brand, region, channel, deliverable description, project goal, and key milestones.",\
            "Brand(s)": "The brand(s) involved in this design project.",\
            "Which quadrant does this fall under in the H&F Brand Architecture matrices?": "Categorization of the project within the H&F Brand Architecture.",\
            "Region(s)": "Geographic regions where the project will be launched or is relevant.",\
            "Channel": "Distribution or sales channel for the project (e.g., e-commerce, retail, Harry's Brand).",\
            "Deliverable Description": "A concise description of the final output of the project (e.g., 'Gen 3 Retail Packaging', 'Website Landing Page').",\
            "Project Goal in One Line": "The primary objective of the project summarized in a single sentence.",\
            "Key Milestones": "Important dates and phases of the project timeline.",\
            "Why are you using the Lite brief?": "Specific reasons for opting for the NPI Lite brief, such as artwork pickup, production-led, or translations.",\
            "If External, what will the partner approval process be?": "Details on how external partners will approve design elements, e.g., number of review rounds.",\
            "Section 2: Project Details": "Detailed information about the project's requirements, including pitching/awarded status, key insights, desired consumer behavior, reference deliverables, assortment, dimensions, budget, and other critical considerations.",\
            "Pitching or Awarded": "Indicates if the project is still in the proposal stage or has been formally approved.",\
            "Key Insights": "Crucial findings or understandings that inform the design direction.",\
            "How do we want our consumer to think/feel/behave as a result of the work?": "Desired consumer response and impact of the design work.",\
            "Reference Deliverables*": "Existing projects or designs that serve as relevant examples or inspiration.",\
            "Required Assortment": "The range or variety of products/items included in the project.",\
            "Dimensions or Size Constraints": "Physical size limitations or specifications for the design deliverables.",\
            "Budget": "Financial allocation for the project.",\
            "Other Business-critical Considerations": "Any additional crucial factors or constraints impacting the project.",\
            "Section 3: Messaging": "Information related to the communication strategy and content, including goals, hierarchy, and links to copy documents.",\
            "Communication Goals": "The objectives of the messaging strategy.",\
            "Messaging Hierarchy in priority order": "The order of importance for different messages or content elements.",\
            "Link to Copy Doc / Artwork Inputs": "URLs or references to documents containing text copy and other artwork assets.",\
            "Brief Signoff": "Section for formal approval and commentary from various stakeholders.",\
            "DRI Brief Approval": "Directly Responsible Individual(s) for approving the brief, specific to digital launch projects.",\
            // Key Milestones specific definitions (if needed, otherwise general 'Key Milestones' is enough)\
            "Creative Brief Kickoff": "The official start date for the creative briefing process.",\
            "R1": "Date for the first review round.",\
            "R2": "Date for the second review round.",\
            "R3": "Date for the third review round.",\
            "Artwork Lock": "Date when the artwork design is finalized and approved.",\
            "Graphics Handoff to Production": "Date when graphic files are handed over for manufacturing/production.",\
            "Print Specs": "Date for finalizing printing specifications.",\
            "Artwork Layout": "Date for the final layout approval of artwork.",\
            "Zookeeper Routing": "Date for routing through the Zookeeper system (internal process).",\
            "Artwork QC": "Date for Quality Control check of artwork.",\
            "Artwork Release": "Date when artwork is officially released for use.",\
            "Packaging Production start date": "Start date for the physical production of packaging.",\
            "Launch Date": "Official public launch date of the product/project.",\
            "R1 2D (if required)": "Date for the first 2D review round, if applicable for Lite briefs.",\
            "Brief Complete": "Date when the brief is finalized.",\
            "Design Review": "Date for the main design review.",\
            "Product Lock": "Date when product specifications are finalized.",\
            "MP start": "Start date for mass production."\
        \};\
\
\
        // Function to show/hide brief sections based on selected type\
        function showBriefType(type) \{\
            // Hide all brief-specific sections and intro texts first\
            npiBriefSections.style.display = 'none';\
            npiLiteBriefSections.style.display = 'none';\
            digitalLaunchBriefSections.style.display = 'none';\
            briefSignoffSection.style.display = 'none'; // Hide signoff by default\
            introTextCommon.style.display = 'none';\
            introTextDigitalLaunch.style.display = 'none';\
\
            // Disable all required fields initially to prevent validation on hidden fields\
            document.querySelectorAll('form [required]').forEach(input => \{\
                input.removeAttribute('required');\
            \});\
\
            // Show the relevant section and set its fields as required\
            if (type === 'npi') \{\
                npiBriefSections.style.display = 'block';\
                briefSignoffSection.style.display = 'block';\
                introTextCommon.style.display = 'block';\
                npiBriefSections.querySelectorAll('[data-npi-required="true"]').forEach(input => \{\
                    input.setAttribute('required', 'required');\
                \});\
                briefSignoffSection.querySelectorAll('[data-signoff-required="true"]').forEach(input => \{\
                    input.setAttribute('required', 'required');\
                \});\
            \} else if (type === 'npi-lite') \{\
                npiLiteBriefSections.style.display = 'block';\
                briefSignoffSection.style.display = 'block';\
                introTextCommon.style.display = 'block';\
                npiLiteBriefSections.querySelectorAll('[data-npi-lite-required="true"]').forEach(input => \{\
                    input.setAttribute('required', 'required');\
                \});\
                briefSignoffSection.querySelectorAll('[data-signoff-required="true"]').forEach(input => \{\
                    input.setAttribute('required', 'required');\
                \});\
            \} else if (type === 'digital-launch') \{\
                digitalLaunchBriefSections.style.display = 'block';\
                introTextDigitalLaunch.style.display = 'block';\
                digitalLaunchBriefSections.querySelectorAll('[data-digital-launch-required="true"]').forEach(input => \{\
                    input.setAttribute('required', 'required');\
                \});\
                // Brief Signoff section remains hidden for digital-launch\
            \}\
        \}\
\
        // Debounce function to limit API calls\
        function debounce(func, delay) \{\
            let timeout;\
            return function(...args) \{\
                const context = this;\
                clearTimeout(timeout);\
                timeout = setTimeout(() => func.apply(context, args), delay);\
            \};\
        \}\
\
        // Function to display inline suggestion\
        function displayInlineSuggestion(targetElement, suggestionText) \{\
            let suggestionBox = targetElement.nextElementSibling; // Assuming suggestion box is next sibling\
            if (!suggestionBox || !suggestionBox.classList.contains('inline-suggestion-box')) \{\
                suggestionBox = document.createElement('div');\
                suggestionBox.classList.add('inline-suggestion-box');\
                targetElement.parentNode.insertBefore(suggestionBox, targetElement.nextSibling);\
            \}\
            suggestionBox.innerHTML = `\
                <span class="inline-suggestion-text">$\{suggestionText\}</span>\
            `;\
            suggestionBox.classList.remove('hidden');\
        \}\
\
        // Function to hide inline suggestion\
        function hideInlineSuggestion(targetElement) \{\
            const suggestionBox = targetElement.nextElementSibling;\
            if (suggestionBox && suggestionBox.classList.contains('inline-suggestion-box')) \{\
                suggestionBox.classList.add('hidden');\
            \}\
        \}\
\
        // Function to show loading for inline suggestion\
        function showInlineLoading(targetElement) \{\
            let loadingSpinner = targetElement.nextElementSibling;\
            // Check if the next sibling is already the loading spinner or a suggestion box\
            if (loadingSpinner && (loadingSpinner.classList.contains('inline-loading-spinner') || loadingSpinner.classList.contains('inline-suggestion-box'))) \{\
                // If it's a suggestion box, get its next sibling for the spinner\
                if (loadingSpinner.classList.contains('inline-suggestion-box')) \{\
                    loadingSpinner = loadingSpinner.nextElementSibling;\
                \}\
            \}\
            \
            if (!loadingSpinner || !loadingSpinner.classList.contains('inline-loading-spinner')) \{\
                loadingSpinner = document.createElement('div');\
                loadingSpinner.classList.add('inline-loading-spinner', 'loading-spinner', 'mt-2', 'ml-2');\
                targetElement.parentNode.insertBefore(loadingSpinner, targetElement.nextSibling);\
            \}\
            loadingSpinner.classList.remove('hidden');\
            hideInlineSuggestion(targetElement); // Hide any previous suggestion\
        \}\
\
        // Function to hide loading for inline suggestion\
        function hideInlineLoading(targetElement) \{\
            let loadingSpinner = targetElement.nextElementSibling;\
            // Adjust for potential suggestion box being the immediate next sibling\
            if (loadingSpinner && loadingSpinner.classList.contains('inline-suggestion-box')) \{\
                loadingSpinner = loadingSpinner.nextElementSibling;\
            \}\
            if (loadingSpinner && loadingSpinner.classList.contains('inline-loading-spinner')) \{\
                loadingSpinner.classList.add('hidden');\
            \}\
        \}\
\
\
        // Function to collect current form data for AI context\
        function collectFormData() \{\
            const formData = \{\};\
            const currentBriefType = briefTypeDropdown.value;\
            formData['briefType'] = currentBriefType;\
\
            // Collect common fields\
            document.querySelectorAll('[data-common-required="true"]').forEach(input => \{\
                if (input.type === 'radio' && !input.checked) \{\
                    return; // Skip unchecked radio buttons\
                \}\
                formData[input.name] = input.value;\
            \});\
\
            // Collect fields specific to the active brief type\
            let activeSection;\
            if (currentBriefType === 'npi') \{\
                activeSection = npiBriefSections;\
                activeSection.querySelectorAll('[data-npi-required="true"]').forEach(input => \{\
                    formData[input.name] = input.value;\
                \});\
            \} else if (currentBriefType === 'npi-lite') \{\
                activeSection = npiLiteBriefSections;\
                activeSection.querySelectorAll('[data-npi-lite-required="true"]').forEach(input => \{\
                    formData[input.name] = input.value;\
                \});\
            \} else if (currentBriefType === 'digital-launch') \{\
                activeSection = digitalLaunchBriefSections;\
                activeSection.querySelectorAll('[data-digital-launch-required="true"]').forEach(input => \{\
                    formData[input.name] = input.value;\
                \});\
            \}\
            return formData;\
        \}\
\
        // Function to call the AI (Gemini API)\
        async function callGlyphAPI(prompt) \{\
            const apiKey = ""; // Canvas will automatically provide this in runtime\
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=$\{apiKey\}`;\
\
            let chatHistory = [\{ role: "user", parts: [\{ text: prompt \}] \}];\
\
            try \{\
                const response = await fetch(apiUrl, \{\
                    method: 'POST',\
                    headers: \{ 'Content-Type': 'application/json' \},\
                    body: JSON.stringify(\{ contents: chatHistory \})\
                \});\
\
                if (!response.ok) \{\
                    const errorData = await response.json();\
                    throw new Error(`API error: $\{response.status\} - $\{errorData.error.message || response.statusText\}`);\
                \}\
\
                const result = await response.json();\
                if (result.candidates && result.candidates.length > 0 &&\
                    result.candidates[0].content && result.candidates[0].content.parts &&\
                    result.candidates[0].content.parts.length > 0) \{\
                    return result.candidates[0].content.parts[0].text;\
                \} else \{\
                    throw new Error("Received an unexpected response structure from the AI.");\
                \}\
            \} catch (error) \{\
                console.error('Error calling Gemini API:', error);\
                throw new Error(`Failed to get AI suggestion: $\{error.message\}.`);\
            \}\
        \}\
\
        // Main AI suggestion generation function (now more generic)\
        async function generateAISuggestion(targetElement, specificPrompt) \{\
            showInlineLoading(targetElement); // Show loading spinner next to the target element\
\
            const currentFormData = collectFormData();\
            \
            let prompt = `$\{glyphPersonality\}\
\
            $\{specificPrompt\}\
\
            Here are the current details of the brief for context: $\{JSON.stringify(currentFormData, null, 2)\}.\
\
            For your reference, here are definitions for various sections and fields in a design brief:\
            $\{JSON.stringify(sectionDefinitions, null, 2)\}\
\
            Please provide a helpful and concise suggestion or elaboration relevant to a design brief, considering the provided definitions and current brief data. Ensure any section names or key terms you refer to are enclosed in <strong>HTML bold tags</strong>.`;\
\
            try \{\
                const text = await callGlyphAPI(prompt);\
                displayInlineSuggestion(targetElement, text);\
            \} catch (error) \{\
                aiErrorDisplay.textContent = error.message;\
                aiErrorDisplay.classList.remove('hidden');\
            \} finally \{\
                hideInlineLoading(targetElement); // Hide loading spinner\
            \}\
        \}\
\
        // Debounced version for assist-while-writing\
        const debouncedGenerateSuggestion = debounce((event) => \{\
            // Defensive check for event and event.target\
            if (!event || !event.target) \{\
                console.error("Received an invalid event object in debouncedGenerateSuggestion:", event);\
                return; // Exit to prevent further errors\
            \}\
\
            const targetElement = event.target;\
            const currentText = event.target.value;\
            const fieldName = event.target.id;\
\
            let specificPrompt = `The user is currently writing in the <strong>$\{fieldName\}</strong> field. Their current input is: "$\{currentText\}". Please provide a concise suggestion to continue or improve this text, relevant to the purpose of the <strong>$\{fieldName\}</strong> field.`;\
            \
            // Add more specific context based on field\
            if (fieldName.includes('insights')) \{\
                specificPrompt = `The user is writing in the <strong>Key Insights</strong> field. Their current input is: "$\{currentText\}". Suggest a concise, impactful insight statement related to the project. Consider the <strong>Project Name</strong> and <strong>Deliverable Description</strong>.`;\
            \} else if (fieldName.includes('communication-goals')) \{\
                specificPrompt = `The user is writing in the <strong>Communication Goals</strong> field. Their current input is: "$\{currentText\}". Suggest a concise communication goal for the project. Consider the <strong>Project Name</strong> and <strong>Deliverable Description</strong>.`;\
            \} else if (fieldName.includes('deliverable-description')) \{\
                specificPrompt = `The user is entering the <strong>Deliverable Description</strong>. Their current input is: "$\{currentText\}". Suggest a concise description for the project's deliverable.`;\
            \} else if (fieldName.includes('project-goal')) \{\
                specificPrompt = `The user is entering the <strong>Project Goal in One Line</strong>. Their current input is: "$\{currentText\}". Suggest a concise one-line project goal. Consider the <strong>Project Name</strong> and <strong>Deliverable Description</strong>.`;\
            \} else if (fieldName.includes('why-brief')) \{\
                specificPrompt = `The user is explaining why they are using the Lite brief. Their current input is: "$\{currentText\}". Suggest a concise reason (e.g., artwork pickup, production-led, translations).`;\
            \} else if (fieldName.includes('reference-deliverables')) \{\
                specificPrompt = `The user is listing <strong>Reference Deliverables</strong>. Their current input is: "$\{currentText\}". Suggest a concise example of a relevant past project job number.`;\
            \} else if (fieldName.includes('other-considerations')) \{\
                specificPrompt = `The user is listing <strong>Other Business-critical Considerations</strong>. Their current input is: "$\{currentText\}". Suggest a concise critical consideration.`;\
            \} else if (fieldName.includes('dri-approval')) \{\
                specificPrompt = `The user is entering the <strong>DRI Brief Approval</strong>. Their current input is: "$\{currentText\}". Suggest a concise name or role for the Directly Responsible Individual.`;\
            \} else if (fieldName.includes('partner-approval')) \{\
                specificPrompt = `The user is describing the <strong>partner approval process</strong>. Their current input is: "$\{currentText\}". Suggest a concise description of a partner approval step.`;\
            \} else if (fieldName.includes('brands')) \{\
                specificPrompt = `The user is entering <strong>Brand(s)</strong>. Their current input is: "$\{currentText\}". Suggest a concise brand name.`;\
            \} else if (fieldName.includes('brand-quadrant')) \{\
                specificPrompt = `The user is entering the <strong>H&F Brand Architecture quadrant</strong>. Their current input is: "$\{currentText\}". Suggest a concise quadrant (e.g., Q1, Q2).`;\
            \} else if (fieldName.includes('region')) \{\
                specificPrompt = `The user is entering the <strong>Region(s)</strong>. Their current input is: "$\{currentText\}". Suggest a concise region (e.g., US, EMEA).`;\
            \} else if (fieldName.includes('channel')) \{\
                specificPrompt = `The user is entering the <strong>Channel</strong>. Their current input is: "$\{currentText\}". Suggest a concise channel (e.g., e-commerce, retail).`;\
            \}\
            \
            generateAISuggestion(targetElement, specificPrompt);\
        \}, 1000); // 1000ms = 1 second debounce delay\
\
        // Attach event listeners for inline assistance\
        function setupInlineAssistance() \{\
            const fieldsForInlineAssist = [\
                // NPI Specific fields\
                document.getElementById('npi-brand-quadrant'),\
                document.getElementById('npi-region'),\
                document.getElementById('npi-channel'),\
                document.getElementById('npi-deliverable-description'),\
                document.getElementById('npi-project-goal'),\
                document.getElementById('npi-key-insights'),\
                document.getElementById('npi-consumer-behavior'),\
                document.getElementById('npi-reference-deliverables'),\
                document.getElementById('npi-required-assortment'),\
                document.getElementById('npi-dimensions-constraints'),\
                document.getElementById('npi-budget'),\
                document.getElementById('npi-other-considerations'),\
                document.getElementById('npi-communication-goals'),\
                document.getElementById('npi-messaging-hierarchy'),\
                document.getElementById('npi-copy-doc-link'),\
                document.getElementById('npi-copy-doc-link-f'),\
                document.getElementById('npi-creative-inspiration'),\
                document.getElementById('npi-competitor-context'),\
\
                // NPI Lite Specific fields\
                document.getElementById('npi-lite-why-brief'),\
                document.getElementById('npi-lite-brand-quadrant'),\
                document.getElementById('npi-lite-region'),\
                document.getElementById('npi-lite-channel'),\
                document.getElementById('npi-lite-deliverable-description'),\
                document.getElementById('npi-lite-project-goal'),\
                document.getElementById('npi-lite-reference-deliverables'),\
                document.getElementById('npi-lite-other-considerations'),\
                document.getElementById('npi-lite-copy-doc-link'),\
                document.getElementById('npi-lite-copy-doc-link-f'),\
\
                // Digital Launch Project Specific fields\
                document.getElementById('digital-launch-dri-approval'),\
                document.getElementById('digital-launch-partner-approval'),\
                document.getElementById('digital-launch-regions'),\
                document.getElementById('digital-launch-channel'),\
                document.getElementById('digital-launch-deliverable-description'),\
                document.getElementById('digital-launch-project-goal'),\
                document.getElementById('digital-launch-reference-deliverables'),\
                document.getElementById('digital-launch-other-considerations'),\
                document.getElementById('digital-launch-copy-doc-link'),\
                document.getElementById('digital-launch-copy-doc-link-f'),\
            ];\
\
            fieldsForInlineAssist.forEach(field => \{\
                if (field) \{ // Ensure the element exists on the current brief type\
                    field.addEventListener('input', (event) => \{\
                        // Defensive check for event and event.target\
                        if (!event || !event.target) \{\
                            console.error("Received an invalid event object in input listener for field:", field ? field.id : 'unknown', event);\
                            return; // Stop execution to prevent TypeError\
                        \}\
\
                        const currentText = event.target.value;\
                        // Only trigger if some text is present and it's a valid input type for assist\
                        if (currentText.length > 5 && (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA')) \{\
                            debouncedGenerateSuggestion(event); // Pass the entire event object\
                        \} else \{\
                            hideInlineSuggestion(event.target);\
                        \}\
                    \});\
                    // Hide suggestion when focus leaves the field\
                    field.addEventListener('blur', (event) => \{\
                        if (event && event.target) \{ // Add guard here too\
                            hideInlineSuggestion(event.target);\
                        \}\
                    \});\
                \}\
            \});\
        \}\
\
\
        // Event listener for "Ask Glyph" button (general query)\
        askGlyphButton.addEventListener('click', () => \{\
            // This button will use the main ai-query textarea\
            generateAISuggestion(aiQueryInput, aiQueryInput.value.trim());\
        \});\
\
        // Add event listener to the dropdown\
        briefTypeDropdown.addEventListener('change', (event) => \{\
            showBriefType(event.target.value);\
            setupInlineAssistance(); // Re-setup listeners for new visible fields\
        \});\
\
        // Initial setup on DOMContentLoaded\
        document.addEventListener('DOMContentLoaded', () => \{\
            // Mark common inputs with a custom attribute\
            document.querySelectorAll('.mb-8.grid.grid-cols-1.sm\\\\:grid-cols-2.gap-6 input, .mb-8.grid.grid-cols-1.sm\\\\:grid-cols-2.gap-6 textarea, .mb-8.grid.grid-cols-1.sm\\\\:grid-cols-2.gap-6 select').forEach(input => \{\
                if (input.hasAttribute('required')) \{\
                    input.setAttribute('data-common-required', 'true');\
                \}\
            \});\
\
            // Mark all inputs in NPI section with a custom attribute for easier toggling\
            npiBriefSections.querySelectorAll('input, textarea, select').forEach(input => \{\
                if (input.hasAttribute('required')) \{\
                    input.setAttribute('data-npi-required', 'true');\
                \}\
            \});\
\
            // Mark all inputs in NPI Lite section with a custom attribute\
            npiLiteBriefSections.querySelectorAll('input, textarea, select').forEach(input => \{\
                if (input.hasAttribute('required')) \{\
                    input.setAttribute('data-npi-lite-required', 'true');\
                \}\
            \});\
\
            // Mark all inputs in Digital Launch section with a custom attribute\
            digitalLaunchBriefSections.querySelectorAll('input, textarea, select').forEach(input => \{\
                if (input.hasAttribute('required')) \{\
                    input.setAttribute('data-digital-launch-required', 'true');\
                \}\
            \});\
\
            // Mark all inputs in Signoff section with a custom attribute\
            briefSignoffSection.querySelectorAll('input, textarea, select').forEach(input => \{\
                if (input.hasAttribute('required')) \{\
                    input.setAttribute('data-signoff-required', 'true');\
                \}\
            \});\
\
            // Show the initial brief type (NPI by default)\
            showBriefType(briefTypeDropdown.value);\
            setupInlineAssistance(); // Initial setup of listeners\
        \});\
    </script>\
</body>\
</html>\
}